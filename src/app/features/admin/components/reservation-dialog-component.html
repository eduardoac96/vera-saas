<p-dialog header="Reserva manual" [(visible)]="visible" [modal]="true" [style]="{width: '50rem', 'max-width': '90vw'}" [closable]="true"
  class="reservation-dialog">
  
  <div class="dialog-content p-fluid">
    <!-- Propiedad -->
    <div class="form-section">
      <h3 class="section-title">Propiedad</h3>
      <div class="field-group">
        <div class="input-container">
          <label for="property" class="input-label">Propiedad</label>
          <input id="property" type="text" pInputText [value]="property?.title" disabled class="custom-input" />
        </div>
        
        <div class="checkbox-container">
          <p-checkbox inputId="existingUser" [(ngModel)]="isExistingUser" binary="true" class="custom-checkbox"></p-checkbox>
          <label for="existingUser" class="checkbox-label">¿Es usuario existente?</label>
        </div>
      </div>
    </div>

    <!-- Huésped -->
    <div class="form-section">
      <h3 class="section-title">Huésped</h3>
      <div class="input-container">
        <label for="guest" class="input-label">Huésped</label>
        <p-autoComplete id="guest" [(ngModel)]="selectedGuest" [suggestions]="filteredGuests"
          (completeMethod)="filterGuests($event)" optionLabel="fullName" placeholder="Busca por nombre"
          class="custom-autocomplete">
        </p-autoComplete>
      </div>
    </div>

    <!-- Fechas -->
    <div class="form-section">
      <div class="input-container">
        <label for="checkin" class="input-label">Fechas</label>
        <p-datepicker id="checkin" [(ngModel)]="checkInDate" dateFormat="dd/mm/yy" selectionMode="range"
          readonlyInput="true" class="custom-datepicker">
        </p-datepicker>
      </div>
    </div>

    <!-- Paquete -->
    <div class="form-section">
      <div class="input-container">
        <label for="package" class="input-label">Paquete</label>
        <p-select id="package" [options]="packages" [(ngModel)]="selectedPackage" 
          placeholder="Selecciona paquete" (onChange)="onPackageChange($event)"
          optionLabel="label" class="custom-dropdown">
        </p-select>
      </div>
    </div>

    <!-- Total -->
    <div class="form-section">
      <div class="input-container">
        <label for="total" class="input-label">Total (MXN)</label>
        <input id="total" type="text" pInputText [value]="'MX$' + totalPrice" disabled class="total-input" />
      </div>
    </div>

    <!-- Botón de confirmación -->
    <div class="button-container">
      <button pButton type="button" label="Confirmar reserva" icon="pi pi-check" (click)="saveReservation()" 
        class="confirm-button">
      </button>
    </div>
  </div>
</p-dialog>

<style>
/* Estilos generales para el diálogo */
.reservation-dialog .p-dialog-content {
  padding: 1.5rem;
  background: #fafafa;
  border-radius: 12px;
}

/* Contenedor principal */
.dialog-content {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Secciones del formulario */
.form-section {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.section-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: #2c3e50;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid #eaeaea;
}

/* Grupos de campos */
.field-group {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

@media (min-width: 768px) {
  .field-group {
    flex-direction: row;
    align-items: flex-end;
  }
  
  .field-group .input-container {
    flex: 1;
  }
}

/* Contenedores de input */
.input-container {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.input-label {
  font-weight: 500;
  color: #34495e;
  font-size: 0.95rem;
}

/* Estilos para inputs personalizados */
.custom-input,
.custom-autocomplete .p-autocomplete-input,
.custom-datepicker .p-inputtext,
.custom-dropdown .p-dropdown {
  width: 100%;
  border-radius: 8px;
  padding: 0.75rem;
  border: 1px solid #dcdfe6;
  background-color: #fff;
  transition: all 0.3s ease;
  font-size: 1rem;
}

.custom-input:focus,
.custom-autocomplete .p-autocomplete-input:focus,
.custom-datepicker .p-inputtext:focus,
.custom-dropdown .p-dropdown:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

/* Checkbox personalizado */
.checkbox-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.custom-checkbox .p-checkbox-box {
  border-radius: 4px;
  border: 1px solid #dcdfe6;
}

.custom-checkbox .p-checkbox-box.p-highlight {
  background-color: #3498db;
  border-color: #3498db;
}

.checkbox-label {
  margin: 0;
  font-size: 0.95rem;
  color: #555;
  cursor: pointer;
}

/* Input de total */
.total-input {
  width: 100%;
  border-radius: 8px;
  padding: 0.75rem;
  background: #eef6ff;
  font-weight: bold;
  color: #1e6bb8;
  border: 1px solid #b8daff;
  font-size: 1.1rem;
}

/* Botón de confirmación */
.button-container {
  margin-top: 1rem;
}

.confirm-button {
  width: 100%;
  border-radius: 8px;
  padding: 0.9rem;
  font-size: 1rem;
  background: linear-gradient(135deg, #28a745, #20c997);
  border: none;
  transition: all 0.3s ease;
}

.confirm-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
}

/* Ajustes responsivos para PrimeNG components */
@media (max-width: 768px) {
  .reservation-dialog .p-dialog {
    width: 90vw !important;
    max-width: 90vw !important;
  }
  
  .p-datepicker {
    width: 100% !important;
  }
  
  .p-autocomplete-panel, .p-dropdown-panel {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* Mejora visual para estados de deshabilitado */
.custom-input:disabled {
  background-color: #f8f9fa;
  color: #6c757d;
  cursor: not-allowed;
}
</style>